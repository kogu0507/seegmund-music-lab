<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>簡易メモ帳 - テストページ</title>

    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">

    <!-- カスタムCSS -->
    <link rel="stylesheet" href="/static/apps/easy-memo/easy-memo.css">
</head>

<body>
    <!-- フロートボタン -->
    <button class="btn btn-primary rounded-circle floating-button" data-bs-toggle="collapse"
        data-bs-target="#easyMemoContainer" aria-expanded="false">
        <i class="bi bi-pencil"></i>
    </button>

    <!-- 簡易メモ帳を開くボタン -->
    <button class="btn btn-primary open-memo-button" data-bs-toggle="collapse" data-bs-target="#easyMemoContainer"
        aria-expanded="false">
        <i class="bi bi-pencil"></i> 簡易メモ帳
    </button>

    <!-- 横スライドでメモ帳を表示 -->
    <div class="collapse collapse-horizontal" id="easyMemoContainer">
        <div class="card card-body">
            <h5>簡易メモ</h5>
            <textarea id="easyMemoTextarea" class="form-control" rows="5" placeholder="メモを入力..."></textarea>
            <div class="text-end mt-2">
                <small class="memo-char-count text-muted">0 / 50000 文字</small>
            </div>
            <div class="mt-2 d-flex justify-content-between">
                <button class="btn btn-sm btn-danger easy-memo-clear">削除</button>
                <button class="btn btn-sm btn-primary easy-memo-copy">メモをコピー</button>
                <button class="btn btn-sm btn-success easy-memo-save">保存</button>
            </div>
        </div>
    </div>

    <!-- プレビューエリア -->
    <div class="previewarea container my-4 p-3 border bg-white">
        <div class="preview-title">簡易メモ帳 プレビュー</div>
        <div class="preview-content"></div>
        <div class="text-end mt-2">
            <small class="memo-char-count text-muted">0 / 50000 文字</small>
        </div>
        <button class="btn btn-sm btn-primary mt-2 open-memo-button" data-bs-toggle="collapse"
            data-bs-target="#easyMemoContainer" aria-expanded="false">
            メモを編集
        </button>
        <button class="btn btn-sm btn-primary mt-2 easy-memo-copy">メモをコピー</button>
    </div>

    <pre>

        ## **✅ テスト項目一覧**
        このリストに沿って、すべての機能が正しく動作するか確認してください。

        ### **1️⃣ メモの基本動作**
        [OK]✅ **メモを入力できるか**  
        ✅ **ページをリロードしてもメモが消えないか（ローカルストレージ復元）**  
        ✅ **保存ボタンを押すとアラートが出るか**  
        ✅ **保存後、ローカルストレージに保存されているか**

        ### **2️⃣ メモの削除**
        ✅ **削除ボタンを押すと「削除しますか？」の確認メッセージが表示されるか**  
        ✅ **削除後、メモが空になるか**  
        ✅ **ローカルストレージからデータが削除されるか**

        ### **3️⃣ メモのコピー**
        ✅ **コピーするメモがある場合、ボタンを押すと「メモをコピーしました！」とアラートが出るか**  
        ✅ **クリップボードにメモの内容がコピーされているか（ペーストして確認）**  
        ✅ **メモが空の場合、「コピーするメモがありません」と警告が出るか**

        ### **4️⃣ 文字数制限**
        ✅ **最大文字数（50,000文字）を超えると警告が表示されるか**  
        ✅ **文字数カウンターがリアルタイムで更新されるか**  
        ✅ **90% 以上の文字を入力すると警告が出るか**

        ### **5️⃣ プレビュー機能**
        ✅ **メモを入力すると、リアルタイムでプレビューに反映されるか**  
        ✅ **改行が `<br>` に変換されているか（Markdown簡易変換）**  
        ✅ **スクリプトタグを入力しても無害化されるか（XSS対策）**

        ### **6️⃣ スライド表示の動作**
        ✅ **「メモを開く」ボタンを押すとスライドが表示されるか**  
        ✅ **「メモを編集」ボタンを押すとスライドが開くか**  
        ✅ **スライドが開いているときにもう一度ボタンを押すと閉じるか**

        ボタンオーバー？でボタンが消える。
        アラートがうるさい。保存した時は下の方に5秒表示とか。

    </pre>

    <!-- Bootstrap & JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dompurify/2.3.10/purify.min.js"></script>
    <script type="module" src="/static/apps/easy-memo/easy-memo.js"></script>
</body>

</html>